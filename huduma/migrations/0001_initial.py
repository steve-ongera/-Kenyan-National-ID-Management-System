# Generated by Django 5.2.4 on 2025-08-26 18:25

import django.contrib.auth.models
import django.contrib.auth.validators
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='ChiefOffice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('address', models.TextField()),
                ('contact_phone', models.CharField(max_length=15)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='County',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('code', models.CharField(max_length=10, unique=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name_plural': 'Counties',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Division',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='DocumentType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('description', models.TextField()),
                ('is_required_for_new_id', models.BooleanField(default=False)),
                ('is_required_for_replacement', models.BooleanField(default=False)),
                ('is_required_for_name_change', models.BooleanField(default=False)),
                ('max_file_size_mb', models.IntegerField(default=5)),
                ('allowed_formats', models.CharField(default='pdf,jpg,jpeg,png', max_length=100)),
            ],
        ),
        migrations.CreateModel(
            name='Fee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fee_type', models.CharField(choices=[('new_id', 'New ID Application'), ('replacement', 'ID Replacement'), ('name_change', 'Name Change'), ('duplicate_certificate', 'Duplicate Certificate'), ('urgent_processing', 'Urgent Processing')], max_length=30, unique=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('description', models.TextField()),
                ('is_mandatory', models.BooleanField(default=True)),
                ('is_active', models.BooleanField(default=True)),
                ('effective_from', models.DateField()),
                ('effective_to', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='NotificationTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('subject', models.CharField(max_length=200)),
                ('message_template', models.TextField()),
                ('notification_type', models.CharField(choices=[('sms', 'SMS'), ('email', 'Email'), ('both', 'SMS and Email')], max_length=20)),
                ('trigger_status', models.CharField(choices=[('started', 'Application Started'), ('documents_uploaded', 'Documents Uploaded'), ('chief_review', 'Under Chief Review'), ('chief_approved', 'Chief Approved'), ('chief_rejected', 'Chief Rejected'), ('do_review', 'Under DO Review'), ('do_approved', 'DO Approved'), ('do_rejected', 'DO Rejected'), ('biometrics_scheduled', 'Biometrics Scheduled'), ('biometrics_taken', 'Biometrics Captured'), ('processing', 'ID Processing'), ('ready_for_collection', 'Ready for Collection'), ('collected', 'ID Collected'), ('rejected', 'Application Rejected'), ('cancelled', 'Application Cancelled')], max_length=30)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='SystemSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('key', models.CharField(max_length=100, unique=True)),
                ('value', models.TextField()),
                ('setting_type', models.CharField(choices=[('text', 'Text'), ('number', 'Number'), ('boolean', 'Boolean'), ('json', 'JSON')], default='text', max_length=20)),
                ('description', models.TextField()),
                ('category', models.CharField(default='general', max_length=50)),
                ('is_public', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='CustomUser',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='email address')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('user_type', models.CharField(choices=[('mwananchi', 'Mwananchi (Citizen)'), ('chief_staff', 'Chief Staff'), ('chief', 'Chief'), ('do_staff', 'DO Staff'), ('do_officer', 'DO Officer'), ('huduma_staff', 'Huduma Staff'), ('admin', 'System Admin')], default='mwananchi', max_length=20)),
                ('phone_number', models.CharField(blank=True, max_length=15, null=True, validators=[django.core.validators.RegexValidator('^\\+?254[0-9]{9}$', 'Enter a valid Kenyan phone number')])),
                ('alternative_phone', models.CharField(blank=True, max_length=15, null=True)),
                ('national_id', models.CharField(blank=True, max_length=20, null=True, unique=True)),
                ('is_verified', models.BooleanField(default=False)),
                ('profile_photo', models.ImageField(blank=True, null=True, upload_to='profiles/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
                ('county', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.county')),
            ],
            options={
                'verbose_name': 'user',
                'verbose_name_plural': 'users',
                'abstract': False,
            },
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='Chief',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('employee_id', models.CharField(max_length=50, unique=True)),
                ('stamp_serial', models.CharField(max_length=50, unique=True)),
                ('appointment_date', models.DateField()),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('office', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='chiefs', to='huduma.chiefoffice')),
            ],
        ),
        migrations.CreateModel(
            name='ChiefStaff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('position', models.CharField(max_length=100)),
                ('employee_id', models.CharField(max_length=50, unique=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('chief_office', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff', to='huduma.chiefoffice')),
                ('reporting_chief', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff', to='huduma.chief')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='BirthCertificate',
            fields=[
                ('certificate_number', models.CharField(max_length=50, primary_key=True, serialize=False, unique=True)),
                ('serial_number', models.CharField(max_length=50, unique=True)),
                ('full_name', models.CharField(max_length=200)),
                ('date_of_birth', models.DateField()),
                ('place_of_birth', models.CharField(max_length=200)),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female')], max_length=10)),
                ('father_name', models.CharField(blank=True, max_length=200, null=True)),
                ('father_id', models.CharField(blank=True, max_length=20, null=True)),
                ('father_nationality', models.CharField(default='KENYAN', max_length=50)),
                ('mother_name', models.CharField(blank=True, max_length=200, null=True)),
                ('mother_id', models.CharField(blank=True, max_length=20, null=True)),
                ('mother_nationality', models.CharField(default='KENYAN', max_length=50)),
                ('guardian_name', models.CharField(blank=True, max_length=200, null=True)),
                ('guardian_id', models.CharField(blank=True, max_length=20, null=True)),
                ('guardian_relationship', models.CharField(blank=True, max_length=50, null=True)),
                ('registration_date', models.DateField()),
                ('issuing_office', models.CharField(max_length=200)),
                ('registrar_name', models.CharField(max_length=200)),
                ('is_kenyan_born', models.BooleanField(default=True)),
                ('naturalization_cert', models.CharField(blank=True, max_length=100, null=True)),
                ('citizenship_acquired_date', models.DateField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('is_verified', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('county_of_birth', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_certificates', to='huduma.county')),
                ('division_of_birth', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_certificates', to='huduma.division')),
            ],
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('document_number', models.CharField(blank=True, max_length=100, null=True)),
                ('file_original', models.FileField(upload_to='documents/original/')),
                ('file_copy', models.FileField(blank=True, null=True, upload_to='documents/copies/')),
                ('is_verified', models.BooleanField(default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_notes', models.TextField(blank=True, null=True)),
                ('file_size', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='uploaded_documents', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_documents', to=settings.AUTH_USER_MODEL)),
                ('document_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.documenttype')),
            ],
        ),
        migrations.CreateModel(
            name='DOOffice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('address', models.TextField()),
                ('contact_phone', models.CharField(max_length=15)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('postal_address', models.CharField(max_length=200)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('county', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.county')),
            ],
        ),
        migrations.CreateModel(
            name='DOOfficer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('employee_id', models.CharField(max_length=50, unique=True)),
                ('appointment_date', models.DateField()),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('do_office', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='officers', to='huduma.dooffice')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='DOStaff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('position', models.CharField(max_length=100)),
                ('employee_id', models.CharField(max_length=50, unique=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('do_office', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff', to='huduma.dooffice')),
                ('reporting_officer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff', to='huduma.doofficer')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='HudumaCentre',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('address', models.TextField()),
                ('contact_phone', models.CharField(max_length=15)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('services_offered', models.TextField()),
                ('operating_hours', models.CharField(default='Monday-Friday 8:00AM-5:00PM', max_length=100)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('county', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.county')),
            ],
        ),
        migrations.CreateModel(
            name='HudumaStaff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('position', models.CharField(max_length=100)),
                ('employee_id', models.CharField(max_length=50, unique=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('huduma_centre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff', to='huduma.hudumacentre')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='IDApplication',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('application_id', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('application_number', models.CharField(max_length=50, unique=True)),
                ('application_type', models.CharField(choices=[('new', 'New ID Application'), ('replacement', 'ID Replacement'), ('name_change', 'Name Change')], default='new', max_length=20)),
                ('entry_point', models.CharField(choices=[('chief', 'Started from Chief Office'), ('huduma', 'Started from Huduma Centre'), ('online', 'Started Online')], max_length=20)),
                ('status', models.CharField(choices=[('started', 'Application Started'), ('documents_uploaded', 'Documents Uploaded'), ('chief_review', 'Under Chief Review'), ('chief_approved', 'Chief Approved'), ('chief_rejected', 'Chief Rejected'), ('do_review', 'Under DO Review'), ('do_approved', 'DO Approved'), ('do_rejected', 'DO Rejected'), ('biometrics_scheduled', 'Biometrics Scheduled'), ('biometrics_taken', 'Biometrics Captured'), ('processing', 'ID Processing'), ('ready_for_collection', 'Ready for Collection'), ('collected', 'ID Collected'), ('rejected', 'Application Rejected'), ('cancelled', 'Application Cancelled')], default='started', max_length=30)),
                ('full_name', models.CharField(max_length=200)),
                ('date_of_birth', models.DateField()),
                ('place_of_birth', models.CharField(max_length=200)),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female')], max_length=10)),
                ('clan_name', models.CharField(blank=True, max_length=100, null=True)),
                ('father_name', models.CharField(blank=True, max_length=200, null=True)),
                ('father_id', models.CharField(blank=True, max_length=20, null=True)),
                ('mother_name', models.CharField(blank=True, max_length=200, null=True)),
                ('mother_id', models.CharField(blank=True, max_length=20, null=True)),
                ('guardian_name', models.CharField(blank=True, max_length=200, null=True)),
                ('guardian_id', models.CharField(blank=True, max_length=20, null=True)),
                ('guardian_relationship', models.CharField(blank=True, max_length=50, null=True)),
                ('phone_number', models.CharField(max_length=15)),
                ('alternative_phone', models.CharField(blank=True, max_length=15, null=True)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('postal_address', models.CharField(blank=True, max_length=200, null=True)),
                ('previous_id_number', models.CharField(blank=True, max_length=20, null=True)),
                ('police_ob_number', models.CharField(blank=True, max_length=50, null=True)),
                ('police_station', models.CharField(blank=True, max_length=100, null=True)),
                ('replacement_reason', models.CharField(blank=True, choices=[('lost', 'Lost'), ('stolen', 'Stolen'), ('damaged', 'Damaged'), ('mutilated', 'Mutilated')], max_length=20, null=True)),
                ('replacement_fee', models.DecimalField(decimal_places=2, default=Decimal('1000.00'), max_digits=10)),
                ('fee_paid', models.BooleanField(default=False)),
                ('payment_reference', models.CharField(blank=True, max_length=100, null=True)),
                ('old_name', models.CharField(blank=True, max_length=200, null=True)),
                ('new_name', models.CharField(blank=True, max_length=200, null=True)),
                ('name_change_reason', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('applicant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='id_applications', to=settings.AUTH_USER_MODEL)),
                ('birth_certificate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.birthcertificate')),
                ('chief', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.chief')),
                ('chief_office', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.chiefoffice')),
                ('county_of_birth', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_applications', to='huduma.county')),
                ('current_county', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='current_applications', to='huduma.county')),
                ('current_division', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='current_applications', to='huduma.division')),
                ('division_of_birth', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_applications', to='huduma.division')),
                ('do_office', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.dooffice')),
                ('do_officer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.doofficer')),
                ('huduma_centre', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.hudumacentre')),
            ],
        ),
        migrations.CreateModel(
            name='ChiefEligibilityLetter',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('letter_number', models.CharField(max_length=50, unique=True)),
                ('full_name', models.CharField(max_length=200)),
                ('date_of_birth', models.DateField()),
                ('place_of_birth', models.CharField(max_length=200)),
                ('father_name', models.CharField(blank=True, max_length=200, null=True)),
                ('mother_name', models.CharField(blank=True, max_length=200, null=True)),
                ('is_eligible', models.BooleanField(default=True)),
                ('eligibility_reason', models.TextField()),
                ('additional_notes', models.TextField(blank=True, null=True)),
                ('qr_code', models.ImageField(blank=True, null=True, upload_to='chief_letters/qr_codes/')),
                ('verification_code', models.CharField(max_length=100, unique=True)),
                ('digital_signature', models.TextField(blank=True, null=True)),
                ('issued_at', models.DateTimeField(auto_now_add=True)),
                ('expires_at', models.DateTimeField()),
                ('is_used', models.BooleanField(default=False)),
                ('used_at', models.DateTimeField(blank=True, null=True)),
                ('chief', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.chief')),
                ('application', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='chief_letter', to='huduma.idapplication')),
            ],
        ),
        migrations.CreateModel(
            name='BiometricData',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('right_thumb', models.TextField(blank=True, null=True)),
                ('left_thumb', models.TextField(blank=True, null=True)),
                ('right_index', models.TextField(blank=True, null=True)),
                ('left_index', models.TextField(blank=True, null=True)),
                ('right_middle', models.TextField(blank=True, null=True)),
                ('left_middle', models.TextField(blank=True, null=True)),
                ('fingerprint_card', models.ImageField(blank=True, null=True, upload_to='biometrics/fingerprints/')),
                ('passport_photo', models.ImageField(upload_to='biometrics/photos/')),
                ('signature', models.ImageField(blank=True, null=True, upload_to='biometrics/signatures/')),
                ('photo_quality_score', models.IntegerField(default=0)),
                ('fingerprint_quality_score', models.IntegerField(default=0)),
                ('signature_quality_score', models.IntegerField(default=0)),
                ('capture_device', models.CharField(blank=True, max_length=100, null=True)),
                ('is_verified', models.BooleanField(default=False)),
                ('verification_notes', models.TextField(blank=True, null=True)),
                ('captured_at', models.DateTimeField(auto_now_add=True)),
                ('captured_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='captured_biometrics', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_biometrics', to=settings.AUTH_USER_MODEL)),
                ('capture_location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.dooffice')),
                ('application', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='biometric_data', to='huduma.idapplication')),
            ],
        ),
        migrations.CreateModel(
            name='BiometricAppointment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scheduled_date', models.DateTimeField()),
                ('appointment_reference', models.CharField(max_length=50, unique=True)),
                ('is_confirmed', models.BooleanField(default=False)),
                ('is_completed', models.BooleanField(default=False)),
                ('no_show', models.BooleanField(default=False)),
                ('reschedule_count', models.IntegerField(default=0)),
                ('max_reschedules', models.IntegerField(default=2)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('scheduled_location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.dooffice')),
                ('application', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='biometric_appointment', to='huduma.idapplication')),
            ],
        ),
        migrations.CreateModel(
            name='ApplicationStatusHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('previous_status', models.CharField(blank=True, max_length=30, null=True)),
                ('new_status', models.CharField(choices=[('started', 'Application Started'), ('documents_uploaded', 'Documents Uploaded'), ('chief_review', 'Under Chief Review'), ('chief_approved', 'Chief Approved'), ('chief_rejected', 'Chief Rejected'), ('do_review', 'Under DO Review'), ('do_approved', 'DO Approved'), ('do_rejected', 'DO Rejected'), ('biometrics_scheduled', 'Biometrics Scheduled'), ('biometrics_taken', 'Biometrics Captured'), ('processing', 'ID Processing'), ('ready_for_collection', 'Ready for Collection'), ('collected', 'ID Collected'), ('rejected', 'Application Rejected'), ('cancelled', 'Application Cancelled')], max_length=30)),
                ('change_reason', models.TextField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('location_type', models.CharField(blank=True, choices=[('chief_office', 'Chief Office'), ('do_office', 'DO Office'), ('huduma_centre', 'Huduma Centre'), ('online', 'Online System')], max_length=20, null=True)),
                ('changed_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='status_history', to='huduma.idapplication')),
            ],
            options={
                'verbose_name_plural': 'Application Status Histories',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='Location',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('division', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='locations', to='huduma.division')),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.AddField(
            model_name='idapplication',
            name='current_location',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='current_applications', to='huduma.location'),
        ),
        migrations.AddField(
            model_name='idapplication',
            name='location_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_applications', to='huduma.location'),
        ),
        migrations.AddField(
            model_name='chiefoffice',
            name='location',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.location'),
        ),
        migrations.AddField(
            model_name='birthcertificate',
            name='location_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_certificates', to='huduma.location'),
        ),
        migrations.CreateModel(
            name='NationalID',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('id_number', models.CharField(max_length=20, unique=True)),
                ('full_name', models.CharField(max_length=200)),
                ('date_of_birth', models.DateField()),
                ('place_of_birth', models.CharField(max_length=200)),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female')], max_length=10)),
                ('district_of_birth', models.CharField(max_length=100)),
                ('division_of_birth', models.CharField(max_length=100)),
                ('location_of_birth', models.CharField(max_length=100)),
                ('sub_location', models.CharField(max_length=100)),
                ('clan', models.CharField(blank=True, max_length=100, null=True)),
                ('place_of_issue', models.CharField(max_length=200)),
                ('date_of_issue', models.DateField(auto_now_add=True)),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('serial_number', models.CharField(max_length=50, unique=True)),
                ('security_features', models.JSONField(default=dict)),
                ('is_active', models.BooleanField(default=True)),
                ('is_printed', models.BooleanField(default=False)),
                ('is_dispatched', models.BooleanField(default=False)),
                ('is_ready_for_collection', models.BooleanField(default=False)),
                ('is_collected', models.BooleanField(default=False)),
                ('collected_at', models.DateTimeField(blank=True, null=True)),
                ('photo', models.ImageField(upload_to='id_photos/')),
                ('signature', models.ImageField(blank=True, null=True, upload_to='id_signatures/')),
                ('printed_at', models.DateTimeField(blank=True, null=True)),
                ('dispatched_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('application', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='national_id', to='huduma.idapplication')),
                ('collected_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='collected_ids', to=settings.AUTH_USER_MODEL)),
                ('collection_location', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.dooffice')),
            ],
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('sms', 'SMS'), ('email', 'Email'), ('system', 'System Notification')], max_length=20)),
                ('recipient_contact', models.CharField(max_length=100)),
                ('subject', models.CharField(blank=True, max_length=200, null=True)),
                ('message', models.TextField()),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('sent', 'Sent'), ('failed', 'Failed'), ('delivered', 'Delivered')], default='pending', max_length=20)),
                ('error_message', models.TextField(blank=True, null=True)),
                ('sent_at', models.DateTimeField(blank=True, null=True)),
                ('delivered_at', models.DateTimeField(blank=True, null=True)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='huduma.idapplication')),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='huduma.notificationtemplate')),
            ],
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('payment_method', models.CharField(choices=[('mpesa', 'M-Pesa'), ('bank_transfer', 'Bank Transfer'), ('cash', 'Cash'), ('card', 'Card Payment')], max_length=20)),
                ('payment_reference', models.CharField(max_length=100, unique=True)),
                ('external_reference', models.CharField(blank=True, max_length=100, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('completed', 'Completed'), ('failed', 'Failed'), ('refunded', 'Refunded')], default='pending', max_length=20)),
                ('payer_phone', models.CharField(blank=True, max_length=15, null=True)),
                ('payer_name', models.CharField(blank=True, max_length=200, null=True)),
                ('paid_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='huduma.idapplication')),
                ('fee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.fee')),
            ],
        ),
        migrations.CreateModel(
            name='Report',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_type', models.CharField(choices=[('daily_summary', 'Daily Summary'), ('weekly_summary', 'Weekly Summary'), ('monthly_summary', 'Monthly Summary'), ('application_status', 'Application Status Report'), ('processing_time', 'Processing Time Analysis'), ('fee_collection', 'Fee Collection Report'), ('user_activity', 'User Activity Report')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('date_from', models.DateField()),
                ('date_to', models.DateField()),
                ('filters', models.JSONField(default=dict)),
                ('data', models.JSONField()),
                ('file_path', models.FileField(blank=True, null=True, upload_to='reports/')),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('generated_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='SecurityIncident',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('incident_type', models.CharField(choices=[('unauthorized_access', 'Unauthorized Access Attempt'), ('multiple_failures', 'Multiple Login Failures'), ('data_breach', 'Data Breach Attempt'), ('suspicious_activity', 'Suspicious Activity'), ('system_compromise', 'System Compromise')], max_length=30)),
                ('severity', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('critical', 'Critical')], max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('is_resolved', models.BooleanField(default=False)),
                ('resolution_notes', models.TextField(blank=True, null=True)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('affected_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resolved_incidents', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='SubCounty',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('county', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sub_counties', to='huduma.county')),
            ],
            options={
                'verbose_name_plural': 'Sub Counties',
                'ordering': ['name'],
                'unique_together': {('county', 'code')},
            },
        ),
        migrations.AddField(
            model_name='idapplication',
            name='current_sub_county',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='current_applications', to='huduma.subcounty'),
        ),
        migrations.AddField(
            model_name='idapplication',
            name='sub_county_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_applications', to='huduma.subcounty'),
        ),
        migrations.AddField(
            model_name='hudumacentre',
            name='sub_county',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.subcounty'),
        ),
        migrations.AddField(
            model_name='division',
            name='sub_county',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='divisions', to='huduma.subcounty'),
        ),
        migrations.AddField(
            model_name='birthcertificate',
            name='sub_county_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_certificates', to='huduma.subcounty'),
        ),
        migrations.AddField(
            model_name='customuser',
            name='sub_county',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='huduma.subcounty'),
        ),
        migrations.CreateModel(
            name='SubLocation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sub_locations', to='huduma.location')),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.AddField(
            model_name='idapplication',
            name='current_sub_location',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='current_applications', to='huduma.sublocation'),
        ),
        migrations.AddField(
            model_name='idapplication',
            name='sub_location_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_applications', to='huduma.sublocation'),
        ),
        migrations.AddField(
            model_name='chiefoffice',
            name='sub_location',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.sublocation'),
        ),
        migrations.AddField(
            model_name='birthcertificate',
            name='sub_location_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_certificates', to='huduma.sublocation'),
        ),
        migrations.CreateModel(
            name='Village',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('sub_location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='villages', to='huduma.sublocation')),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.AddField(
            model_name='idapplication',
            name='current_village',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='current_applications', to='huduma.village'),
        ),
        migrations.AddField(
            model_name='idapplication',
            name='village_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_applications', to='huduma.village'),
        ),
        migrations.AddField(
            model_name='birthcertificate',
            name='village_of_birth',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='birth_certificates', to='huduma.village'),
        ),
        migrations.CreateModel(
            name='WaitingCard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('serial_number', models.CharField(max_length=50, unique=True)),
                ('expected_collection_date', models.DateField()),
                ('collection_instructions', models.TextField()),
                ('qr_code', models.ImageField(blank=True, null=True, upload_to='waiting_cards/qr_codes/')),
                ('is_active', models.BooleanField(default=True)),
                ('is_collected', models.BooleanField(default=False)),
                ('issued_at', models.DateTimeField(auto_now_add=True)),
                ('application', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='waiting_card', to='huduma.idapplication')),
                ('collection_location', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.dooffice')),
            ],
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('create', 'Create'), ('update', 'Update'), ('delete', 'Delete'), ('view', 'View'), ('login', 'Login'), ('logout', 'Logout'), ('approve', 'Approve'), ('reject', 'Reject'), ('verify', 'Verify'), ('collect', 'Collect')], max_length=20)),
                ('content_type', models.CharField(max_length=100)),
                ('object_id', models.CharField(max_length=100)),
                ('object_repr', models.CharField(max_length=200)),
                ('changes', models.JSONField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField()),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('session_key', models.CharField(blank=True, max_length=100, null=True)),
                ('location_type', models.CharField(blank=True, choices=[('chief_office', 'Chief Office'), ('do_office', 'DO Office'), ('huduma_centre', 'Huduma Centre'), ('online', 'Online')], max_length=20, null=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='audit_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['user', 'timestamp'], name='huduma_audi_user_id_991ae5_idx'), models.Index(fields=['action', 'timestamp'], name='huduma_audi_action_7f692c_idx'), models.Index(fields=['content_type', 'object_id'], name='huduma_audi_content_0c94ee_idx')],
            },
        ),
        migrations.CreateModel(
            name='ApplicationDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_required', models.BooleanField(default=True)),
                ('is_provided', models.BooleanField(default=False)),
                ('is_verified', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('document', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.document')),
                ('document_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='huduma.documenttype')),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='application_documents', to='huduma.idapplication')),
            ],
            options={
                'unique_together': {('application', 'document_type')},
            },
        ),
    ]
